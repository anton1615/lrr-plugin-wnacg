# Wnacg Downloader for LANraragi

一個為 [LANraragi](https://github.com/Difegue/LANraragi) 設計的自定義下載插件，專門用於從 Wnacg (紳士漫畫) 下載漫畫並自動封裝為 ZIP。

## 核心功能
- **全自動下載**：支援從 Wnacg 網址直接抓取 ZIP 檔案或圖片清單。
- **網址規範化**：自動處理 `photos-index`、`photos-slide` 以及 `aid-xxxx` 等各種網址格式。
- **多網域支援**：支援 `wnacg.com`、`wnacg.org` 以及 `wnacg.net`。
- **現代技術**：基於 `Mojo::UserAgent` 實作，具備優異的連線穩定性與防盜鏈處理。

## 系統需求
- LANraragi v0.8.0 或更高版本。
- 系統需安裝 `Mojo::UserAgent` (LANraragi 內建已包含)。

## 安裝說明

### 1. NixOS 系統 (宣告式安裝)
如果您是 NixOS 使用者，建議直接在您的 `configuration.nix` 或服務設定中加入以下宣告：

```nix
let
  wnacgPlugin = pkgs.fetchurl {
    url = "https://raw.githubusercontent.com/anton1615/lrr-plugin-wnacg/master/Wnacg.pm";
    sha256 = "0iawqhfah0phsk4vvhm96lyr56i1qwphxnvy5idywbyq6rjj9025"; # 請使用實際的 hash
  };
in {
  virtualisation.oci-containers.containers.lanraragi.volumes = [
    "${wnacgPlugin}:/home/koyomi/lanraragi/lib/LANraragi/Plugin/Download/Wnacg.pm:ro"
  ];
}
```

### 2. 一般系統 (手動安裝)
1. 下載本倉庫的 `Wnacg.pm` 檔案。
2. 將其放入 LANraragi 安裝目錄下的 `/lib/LANraragi/Plugin/Sideloaded/` 資料夾中。
3. 重啟 LANraragi。
4. 進入 Web UI -> **Configuration** -> **Plugins** -> **Downloader 插件** 勾選啟用。

## 技術細節
- **開發工具**：本外掛代碼由 **Gemini CLI** 自動生成與調優。
- **測試環境**：NixOS 25.11, LANraragi 0.9.60 容器環境。
- **邏輯流**：優先尋找 Wnacg 官方提供的直接下載 ZIP 連結，若失敗則回退至圖片清單抓取模式。

## 授權協議
本專案採用 [MIT License](LICENSE) 授權。

---
*Generated by Gemini CLI Agent*
